{
    "$schema": "http://json-schema.org/draft-07/schema#",
    "title": "CNetworkScheme",
    "description": "Schema describing the JSON file structure for the network configuration. It is is used to define the properties of the global network.",
    "type": "object",
    "properties": {
        "defaultDownlinkCapacity": { 
            "description": "This downlink capacity value will be used for node-specific capacity calculation, if it wasn't set in the cell configuration.",
            "oneOf": [
                { "type": "integer", "minimum": 0 },
                { "type": "string" }
            ],
            "default": "100 Gigabit"
        },
        "defaultUplinkCapacity": { 
            "description": "This uplink capacity value will be used for node-specific capacity calculation, if it wasn't set in the cell configuration.",
            "oneOf": [
                { "type": "integer", "minimum": 0 },
                { "type": "string" }
            ],
            "default": "100 Gigabit"
        },
        "globalNetwork": {
            "description": "The global network definition.",
            "type": "object",
            "$ref": "#/definitions/globalNetwork"
        },
        "servers": {
            "description": "List of configured servers.",
            "type": "array",
            "items": { "$ref": "#/definitions/server" }
        }
    },
    "required": [ "globalNetwork" ],
    "definitions": {
        "globalNetwork":{
            "title": "globalNetwork",
            "description": "Holds all coverage properties of one region of the radio access network (ran-part). Such a configuration consists of one uplink-module and one downlink-module. In this context, uplink and downlink always refer to the direction TOWARDS and respectively FROM the GEO entity.",
            "type": "object",
            "properties": {
                "uplink": {
                    "title": "uplink",
                    "description": "The uplink direction only allows point-to-point communication (unicast). It is composed of the three nested models for delay, transmission configuration and capacity.",
                    "type": "object",
                    "properties": {
                        "delay": { 
                            "description": "The delay used by the uplink.",
                            "$ref": "#/definitions/delay" 
                        },
                        "transmission": { 
                            "description": "The packet retransmission (here summarized in the delay).",
                            "$ref": "#/definitions/transmission" 
                        },
                        "capacity": { 
                            "description": "The current capacity.",
                            "oneOf": [
                                { "type": "integer", "minimum": 0 },
                                { "type": "string" }
                            ]
                        },
                        "maxCapacity": {
                            "description": "The maximal capacity when no transmission is ongoing.",
                            "type": "number"
                        }
                    },
                    "required": [ "delay", "transmission", "capacity" ]
                },
                "downlink": {
                    "title": "downlink",
                    "description": "The downlink supports two individual paths.",
                    "type": "object",
                    "properties": {
                        "unicast": { 
                            "description": "Point-to-point communication.",
                            "$ref": "#/definitions/unicast" 
                        },
                        "multicast": { 
                            "description": "Point-to-multipoint communication.",
                            "$ref": "#/definitions/multicast" 
                        },
                        "capacity": { 
                            "description": "Shared capacity between unicast and multicast.",
                            "oneOf": [
                                { "type": "integer", "minimum": 0 },
                                { "type": "string" }
                            ]
                        }
                    },
                    "required": [ "unicast", "multicast", "capacity" ]
                }
            }
        },
        "delay": {
            "title": "delay",
            "description": "",
            "oneOf": [
                {
                    "type": "object",
                    "properties": {
                        "type": {
                            "type": "string",
                            "enum": [ "GammaRandomDelay", "GammaSpeedDelay" ]
                        },
                        "minDelay": {
                            "oneOf": [
                                { "type": "number", "minimum": 0 },
                                { "type": "string", "minLength": 2 }
                            ]
                        },
                        "expDelay": {
                            "oneOf": [
                                { "type": "number", "minimum": 0 },
                                { "type": "string", "minLength": 2 }
                            ]
                        }
                    },
                    "required": [ "type", "minDelay", "expDelay" ]
                },
                {
                    "type": "object",
                    "properties": {
                        "type": {
                            "type": "string",
                            "enum": [ "ConstantDelay" ]
                        },
                        "delay": {
                            "oneOf": [
                                { "type": "number", "minimum": 0 },
                                { "type": "string", "minLength": 2 }
                            ]
                        }
                    },
                    "required": [ "type", "delay" ]
                },
                {
                    "type": "object",
                    "properties": {
                        "type": {
                            "type": "string",
                            "enum": [ "SimpleRandomDelay" ]
                        },
                        "steps": {
                            "type": "integer",
                            "minimum": 0
                        },
                        "minDelay": {
                            "oneOf": [
                                { "type": "number", "minimum": 0 },
                                { "type": "string", "minLength": 2 }
                            ]
                        },
                        "maxDelay": {
                            "oneOf": [
                                { "type": "number", "minimum": 0 },
                                { "type": "string", "minLength": 2 }
                            ]
                        }
                    },
                    "required": [ "type", "steps", "minDelay", "maxDelay" ]
                }
            ]
        },
        "transmission": {
            "title": "transmission",
            "description": "Transmission model.",
            "type": "object",
            "properties": {
                "lossProbability": {
                    "type": "number",
                    "minimum": 0.0,
                    "maximum": 1.0
                },
                "maxRetries": {
                    "type": "integer",
                    "minimum": 0
                }
            },
            "required": [ "lossProbability" ]
        },
        "unicast": {
            "title": "unicast",
            "description": "",
            "type": "object",
            "properties": {
                "delay": { 
                    "description": "Delay to be used by unicast.",
                    "$ref": "#/definitions/delay" 
                },
                "transmission": { 
                    "description": "Parameters for Transmission Model to be used by unicast.",
                    "$ref": "#/definitions/transmission" 
                }
            },
            "required": [ "delay", "transmission" ]
        },
        "multicast": {
            "title": "multicast",
            "type": "object",
            "properties": {
                "delay": { 
                    "description": "Delay to be used by multicast.",
                    "$ref": "#/definitions/delay" 
                },
                "transmission": { 
                    "description": "Parameters for Transmission Model to be used by multicast.",
                    "$ref": "#/definitions/transmission" 
                },
                "usableCapacity": {
                    "description": "The usableCapacity configures the ratio of the overall downlink capacity allowed to be used.",
                    "type": "number",
                    "minimum": 0.0,
                    "maximum": 1.0
                }
            },
            "required": [ "delay", "transmission", "usableCapacity" ]
        },
        "server": {
            "title": "server",
            "description": "",
            "type": "object",
            "properties": {
                "id": {
                    "description": "Network-Id for identification.",
                    "type": "string"
                },
                "uplink": {
                    "description": "",
                    "type": "object",
                    "properties": {
                        "delay": { "$ref": "#/definitions/delay" },
                        "transmission": { "$ref": "#/definitions/transmission" }
                    },
                    "required": [ "delay", "transmission" ],
                    "additionalProperties": false
                },
                "downlink": {
                    "type": "object",
                    "properties": {
                        "unicast": { "$ref": "#/definitions/unicast" }
                    },
                    "required": [ "unicast" ],
                    "additionalProperties": false
                }
            },
            "required": [ "id" ],
            "additionalProperties": false
        }
    }
}